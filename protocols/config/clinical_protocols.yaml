# Verified Clinical Contexts Configuration
#
# Each verified context represents a HYPEREDGE in the clinical knowledge graph.
# A hyperedge connects a set of patient conditions to a formally verified protocol.
#
# Proof Types:
#   - independent: Single condition, base protocol
#   - compositional: Multiple conditions, coordinates compatible base protocols
#   - interaction: Multiple conditions, resolves conflicts with specialized protocol

metadata:
  config_version: "2.0.0"
  last_updated: "2025-01-27"
  description: "Hypergraph of verified clinical contexts with explicit protocol composition"

verified_contexts:
  # ============================================================================
  # INDEPENDENT PROTOCOLS: Base protocols for single conditions
  # ============================================================================
  
  - context_id: "P001"
    hyperedge:
      conditions: [pregnant]
      proof:
        type: independent
        lean_file: "verification/guidelines/pregnancy_protocol.lean"
        status: verified
        verified_at: "2024-12-01"
    protocol:
      name: "Pregnancy Management Protocol"
      description: "Clinical protocol for pregnant patients"
      guideline_source: "US Antenatal Care Guideline"
      version: "1.2.0"
      regulatory:
        country: "ZA"
        body: "FDA"
        reviewer: "ACOG Clinical Committee"
        approval_status: "approved"

  - context_id: "P002"
    hyperedge:
      conditions: [hiv_infection]
      proof:
        type: independent
        lean_file: "verification/guidelines/hiv_protocol.lean"
        status: verified
        verified_at: "2024-11-15"
    protocol:
      name: "HIV Treatment Protocol"
      description: "Clinical protocol for HIV-positive patients"
      guideline_source: "US HIV Treatment Guideline"
      version: "1.1.0"
      regulatory:
        country: "ZA"
        body: "CDC"
        reviewer: "CDC HIV/AIDS Prevention"
        approval_status: "approved"

  - context_id: "P003"
    hyperedge:
      conditions: [diabetes_mellitus]
      proof:
        type: independent
        lean_file: "verification/guidelines/diabetes_protocol.lean"
        status: verified
        verified_at: "2024-10-20"
    protocol:
      name: "Diabetes Management Protocol"
      description: "Clinical protocol for diabetic patients"
      guideline_source: "US Diabetes Management Guideline"
      version: "1.0.0"
      regulatory:
        country: "ZA"
        body: "ADA"
        reviewer: "ADA Standards of Care Committee"
        approval_status: "approved"

  - context_id: "P004"
    hyperedge:
      conditions: [hypertension]
      proof:
        type: independent
        lean_file: "verification/guidelines/hypertension_protocol.lean"
        status: verified
        verified_at: "2024-10-20"
    protocol:
      name: "Hypertension Management Protocol"
      description: "Clinical protocol for hypertensive patients"
      guideline_source: "US Hypertension Guideline"
      version: "1.0.0"
      regulatory:
        country: "ZA"
        body: "AHA"
        reviewer: "AHA/ACC Guideline Committee"
        approval_status: "approved"

  - context_id: "P005"
    hyperedge:
      conditions: [age_over_65]
      proof:
        type: independent
        lean_file: "verification/guidelines/elderly_protocol.lean"
        status: verified
        verified_at: "2024-09-15"
    protocol:
      name: "Geriatric Care Protocol"
      description: "Clinical protocol for patients over 65"
      guideline_source: "US Older Persons Care Guideline"
      version: "1.0.0"
      regulatory:
        country: "ZA"
        body: "AGS"
        reviewer: "American Geriatrics Society"
        approval_status: "approved"

  - context_id: "P006"
    hyperedge:
      conditions: [pediatric]
      proof:
        type: independent
        lean_file: "verification/guidelines/pediatric_protocol.lean"
        status: verified
        verified_at: "2024-09-15"
    protocol:
      name: "Pediatric Care Protocol"
      description: "Clinical protocol for pediatric patients"
      guideline_source: "US Pediatric Care Guideline"
      version: "1.0.0"
      regulatory:
        country: "ZA"
        body: "AAP"
        reviewer: "American Academy of Pediatrics"
        approval_status: "approved"

  # ============================================================================
  # INTERACTION PROTOCOLS: Specialized protocols that resolve conflicts
  # ============================================================================

  - context_id: "P101"
    hyperedge:
      conditions: [pregnant, hiv_infection]
      proof:
        type: interaction
        lean_file: "verification/guidelines/pregnancy_hiv_interaction.lean"
        resolves_conflicts_between: ["P001", "P002"]
        status: verified
        verified_at: "2024-12-01"
    protocol:
      name: "PMTCT Protocol"
      description: "Prevention of mother-to-child HIV transmission"
      guideline_source: "US PMTCT Guideline"
      version: "1.1.0"
      composition:
        replaces: ["P001", "P002"]  # Does NOT use base protocols
        reason: "Standard HIV meds contraindicated in pregnancy; specialized ART required"
      regulatory:
        country: "ZA"
        body: "DHHS"
        reviewer: "DHHS Perinatal HIV Guidelines Panel"
        approval_status: "approved"

  - context_id: "P102"
    hyperedge:
      conditions: [pregnant, diabetes_mellitus]
      proof:
        type: interaction
        lean_file: "verification/guidelines/pregnancy_diabetes_interaction.lean"
        resolves_conflicts_between: ["P001", "P003"]
        status: verified
        verified_at: "2024-11-01"
    protocol:
      name: "Gestational Diabetes Protocol"
      description: "Diabetes management during pregnancy"
      guideline_source: "US Gestational Diabetes Guideline"
      version: "1.0.0"
      composition:
        replaces: ["P001", "P003"]
        reason: "Oral hypoglycemics contraindicated; insulin dosing adjusted for pregnancy"
      regulatory:
        country: "ZA"
        body: "ACOG"
        reviewer: "ACOG Practice Bulletin Committee"
        approval_status: "approved"

  - context_id: "P103"
    hyperedge:
      conditions: [pregnant, hypertension]
      proof:
        type: interaction
        lean_file: "verification/guidelines/pregnancy_hypertension_interaction.lean"
        resolves_conflicts_between: ["P001", "P004"]
        status: verified
        verified_at: "2024-11-01"
    protocol:
      name: "Hypertensive Disorders in Pregnancy Protocol"
      description: "Hypertension management during pregnancy"
      guideline_source: "US Hypertensive Disorders in Pregnancy Guideline"
      version: "1.0.0"
      composition:
        replaces: ["P001", "P004"]
        reason: "ACE inhibitors/ARBs contraindicated; pregnancy-safe antihypertensives required"
      regulatory:
        country: "ZA"
        body: "ACOG"
        reviewer: "ACOG Task Force on Hypertension"
        approval_status: "approved"

  # ============================================================================
  # COMPOSITIONAL PROTOCOLS: Coordinates compatible base protocols
  # ============================================================================

  - context_id: "P201"
    hyperedge:
      conditions: [diabetes_mellitus, hypertension]
      proof:
        type: compositional
        lean_file: "verification/guidelines/diabetes_hypertension_compositional.lean"
        encapsulates: ["P003", "P004"]  # Uses base proofs
        proves_only: compatibility
        status: verified
        verified_at: "2024-10-20"
    protocol:
      name: "Cardio-Metabolic Risk Protocol"
      description: "Coordinated management for diabetes and hypertension"
      guideline_source: "US Cardio-Metabolic Risk Guideline"
      version: "1.0.0"
      composition:
        draws_from: ["P003", "P004"]  # Uses both base protocols
        coordination:
          - "Adjusted BP targets for diabetics (<130/80 vs <140/90)"
          - "Monitor for drug interactions (e.g., thiazides affect glucose)"
          - "Shared lifestyle interventions (diet, exercise)"
          - "Prefer ACE-I/ARB for dual cardio-renal protection"
      regulatory:
        country: "ZA"
        body: "ACC"
        reviewer: "ACC/AHA Joint Committee"
        approval_status: "approved"

  - context_id: "P202"
    hyperedge:
      conditions: [age_over_65, diabetes_mellitus]
      proof:
        type: compositional
        lean_file: "verification/guidelines/elderly_diabetes_compositional.lean"
        encapsulates: ["P005", "P003"]
        proves_only: compatibility
        status: verified
        verified_at: "2024-10-01"
    protocol:
      name: "Geriatric Diabetes Protocol"
      description: "Age-adjusted diabetes management for elderly patients"
      guideline_source: "US Diabetes in Older Adults Guideline"
      version: "1.0.0"
      composition:
        draws_from: ["P005", "P003"]
        coordination:
          - "Relaxed HbA1c targets (7.5-8.0% vs <7%) to reduce hypoglycemia risk"
          - "Avoid sulfonylureas due to hypoglycemia risk in elderly"
          - "Simplified medication regimens for adherence"
          - "Increased fall risk monitoring with glucose fluctuations"
      regulatory:
        country: "ZA"
        body: "AGS"
        reviewer: "AGS/ADA Joint Expert Panel"
        approval_status: "approved"

  # ============================================================================
  # COMPLEX INTERACTIONS: Multiple conditions requiring specialized resolution
  # ============================================================================

  - context_id: "P301"
    hyperedge:
      conditions: [pregnant, hiv_infection, diabetes_mellitus]
      proof:
        type: interaction
        lean_file: "verification/guidelines/pregnancy_hiv_diabetes_interaction.lean"
        resolves_conflicts_between: ["P001", "P002", "P003"]
        status: verified
        verified_at: "2024-12-01"
    protocol:
      name: "Complex Antenatal Co-morbidity Protocol"
      description: "Specialized protocol for pregnancy with HIV and diabetes"
      guideline_source: "US Complex Antenatal Co-morbidity Guideline"
      version: "1.0.0"
      composition:
        replaces: ["P001", "P002", "P003"]
        reason: "Multiple drug contraindications; complex ART-insulin-pregnancy interactions"
      regulatory:
        country: "ZA"
        body: "ACOG"
        reviewer: "ACOG/DHHS Joint Panel"
        approval_status: "approved"
